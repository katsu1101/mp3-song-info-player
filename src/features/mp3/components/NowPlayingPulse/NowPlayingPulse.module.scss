/* 再生中インジケータ（疑似波形） */
/* 円形メーター本体 */
.npRing {
  position: relative;
  width: 13px; /* ボタン内想定 */
  height: 18px;
  display: inline-block;
  color: currentColor;
}

/* バー共通 */
.npRing > span {
  position: absolute;
  left: 50%;
  top: 50%;

  /* 棒の太さと長さ（ベース） */
  width: 2px;
  height: 4px;

  border-radius: 999px;
  background: currentColor;
  opacity: .9;

  /* 伸び縮みを scaleY で */
  transform-origin: 50% 100%;
  will-change: transform, opacity;
}

/* 12本を円周に配置（半径=7pxあたり） */
.npRing > span:nth-child(1) {
  transform: translate(-50%, -50%) rotate(0deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(2) {
  transform: translate(-50%, -50%) rotate(30deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(3) {
  transform: translate(-50%, -50%) rotate(60deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(4) {
  transform: translate(-50%, -50%) rotate(90deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(5) {
  transform: translate(-50%, -50%) rotate(120deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(6) {
  transform: translate(-50%, -50%) rotate(150deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(7) {
  transform: translate(-50%, -50%) rotate(180deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(8) {
  transform: translate(-50%, -50%) rotate(210deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(9) {
  transform: translate(-50%, -50%) rotate(240deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(10) {
  transform: translate(-50%, -50%) rotate(270deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(11) {
  transform: translate(-50%, -50%) rotate(300deg) translateY(-7px) scaleY(.25);
}

.npRing > span:nth-child(12) {
  transform: translate(-50%, -50%) rotate(330deg) translateY(-7px) scaleY(.25);
}

/* ✅ “あなたのやつ” を円形用に：速度差 + wave1/wave2を割当 */
.npRing > span:nth-child(1) {
  animation: npRing1 0.72s ease-in-out infinite -0.10s;
}

.npRing > span:nth-child(2) {
  animation: npRing2 0.86s ease-in-out infinite -0.22s;
}

.npRing > span:nth-child(3) {
  animation: npRing1 0.64s ease-in-out infinite -0.31s;
}

.npRing > span:nth-child(4) {
  animation: npRing2 0.92s ease-in-out infinite -0.18s;
}

.npRing > span:nth-child(5) {
  animation: npRing1 0.70s ease-in-out infinite -0.27s;
}

.npRing > span:nth-child(6) {
  animation: npRing2 0.98s ease-in-out infinite -0.40s;
}

/* 残りは既存のパターンを繰り返し */
.npRing > span:nth-child(7) {
  animation: npRing1 0.76s ease-in-out infinite -0.14s;
}

.npRing > span:nth-child(8) {
  animation: npRing2 0.90s ease-in-out infinite -0.28s;
}

.npRing > span:nth-child(9) {
  animation: npRing1 0.66s ease-in-out infinite -0.36s;
}

.npRing > span:nth-child(10) {
  animation: npRing2 1.02s ease-in-out infinite -0.20s;
}

.npRing > span:nth-child(11) {
  animation: npRing1 0.74s ease-in-out infinite -0.30s;
}

.npRing > span:nth-child(12) {
  animation: npRing2 0.96s ease-in-out infinite -0.44s;
}

/* ✅ wave を scaleY 用に置き換え（多点で上下） */
@keyframes npRing1 {
  0% {
    opacity: .55;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.25);
  }
  12% {
    opacity: 1;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(1.05);
  }
  28% {
    opacity: .75;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.40);
  }
  44% {
    opacity: 1;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(1.20);
  }
  60% {
    opacity: .70;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.35);
  }
  78% {
    opacity: .95;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.85);
  }
  100% {
    opacity: .55;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.25);
  }
}

@keyframes npRing2 {
  0% {
    opacity: .60;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.35);
  }
  16% {
    opacity: .90;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.70);
  }
  34% {
    opacity: .65;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.32);
  }
  52% {
    opacity: 1;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(1.15);
  }
  70% {
    opacity: .75;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.45);
  }
  86% {
    opacity: .95;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.95);
  }
  100% {
    opacity: .60;
    transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.35);
  }
}

/* ⛳ 上の keyframes は var(--rot) / var(--rad) を使うので、
   各 span にそれを渡す（これが“円形化の肝”） */
.npRing > span {
  --rot: rotate(0deg);
  --rad: translateY(-7px);
}

/* 各バーに角度を渡す */
.npRing > span:nth-child(1) {
  --rot: rotate(0deg);
}

.npRing > span:nth-child(2) {
  --rot: rotate(30deg);
}

.npRing > span:nth-child(3) {
  --rot: rotate(60deg);
}

.npRing > span:nth-child(4) {
  --rot: rotate(90deg);
}

.npRing > span:nth-child(5) {
  --rot: rotate(120deg);
}

.npRing > span:nth-child(6) {
  --rot: rotate(150deg);
}

.npRing > span:nth-child(7) {
  --rot: rotate(180deg);
}

.npRing > span:nth-child(8) {
  --rot: rotate(210deg);
}

.npRing > span:nth-child(9) {
  --rot: rotate(240deg);
}

.npRing > span:nth-child(10) {
  --rot: rotate(270deg);
}

.npRing > span:nth-child(11) {
  --rot: rotate(300deg);
}

.npRing > span:nth-child(12) {
  --rot: rotate(330deg);
}

/* 一時停止 */
.npRing.isPaused > span {
  animation: none;
  opacity: .7;
  transform: translate(-50%, -50%) var(--rot) var(--rad) scaleY(.35);
}

@media (prefers-reduced-motion: reduce) {
  .npRing > span {
    animation: none;
  }
}

(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75658,e=>{"use strict";var t=e.i(93432),a=e.i(81995),s=e.i(20881),r=e.i(30222),i=e.i(93403),n=e.i(19102),o=e.i(6568);let l=(0,t.default)("music-metadata:parser:MP4:atom");class d extends(0,n.makeUnexpectedFileContentError)("MP4"){}let h={len:8,get:(e,t)=>{let s=a.UINT32_BE.get(e,t);if(s<0)throw new d("Invalid atom header length");return{length:BigInt(s),name:new a.StringType(4,"latin1").get(e,t+4)}},put:(e,t,s)=>(a.UINT32_BE.put(e,t,Number(s.length)),i.FourCcToken.put(e,t+4,s.name))},m=a.UINT64_BE,c={len:4,get:(e,t)=>({type:new a.StringType(4,"ascii").get(e,t)})};class g{constructor(e,t,a){if(e<t)throw new d(`Atom ${a} expected to be ${t}, but specifies ${e} bytes long.`);e>t&&l(`Warning: atom ${a} expected to be ${t}, but was actually ${e} bytes long.`),this.len=e}}let p=(e,t)=>new Date(1e3*(a.UINT32_BE.get(e,t)-0x7c25b080));class u extends g{constructor(e){super(e,24,"mdhd")}get(e,t){return{version:a.UINT8.get(e,t+0),flags:a.UINT24_BE.get(e,t+1),creationTime:p(e,t+4),modificationTime:p(e,t+8),timeScale:a.UINT32_BE.get(e,t+12),duration:a.UINT32_BE.get(e,t+16),language:a.UINT16_BE.get(e,t+20),quality:a.UINT16_BE.get(e,t+22)}}}class f extends g{constructor(e){super(e,100,"mvhd")}get(e,t){return{version:a.UINT8.get(e,t),flags:a.UINT24_BE.get(e,t+1),creationTime:p(e,t+4),modificationTime:p(e,t+8),timeScale:a.UINT32_BE.get(e,t+12),duration:a.UINT32_BE.get(e,t+16),preferredRate:a.UINT32_BE.get(e,t+20),preferredVolume:a.UINT16_BE.get(e,t+24),previewTime:a.UINT32_BE.get(e,t+72),previewDuration:a.UINT32_BE.get(e,t+76),posterTime:a.UINT32_BE.get(e,t+80),selectionTime:a.UINT32_BE.get(e,t+84),selectionDuration:a.UINT32_BE.get(e,t+88),currentTime:a.UINT32_BE.get(e,t+92),nextTrackID:a.UINT32_BE.get(e,t+96)}}}class T{constructor(e){this.len=e}get(e,t){return{type:{set:a.UINT8.get(e,t+0),type:a.UINT24_BE.get(e,t+1)},locale:a.UINT24_BE.get(e,t+4),value:new a.Uint8ArrayType(this.len-8).get(e,t+8)}}}class k{constructor(e){this.len=e}get(e,t){return{version:a.UINT8.get(e,t),flags:a.UINT24_BE.get(e,t+1),name:new a.StringType(this.len-4,"utf-8").get(e,t+4)}}}class I{constructor(e){this.len=e}get(e,t){return{version:a.UINT8.get(e,t),flags:a.UINT24_BE.get(e,t+1),creationTime:p(e,t+4),modificationTime:p(e,t+8),trackId:a.UINT32_BE.get(e,t+12),duration:a.UINT32_BE.get(e,t+20),layer:a.UINT16_BE.get(e,t+24),alternateGroup:a.UINT16_BE.get(e,t+26),volume:a.UINT16_BE.get(e,t+28)}}}class w{constructor(e){this.len=e}get(e,t){let s=this.len-12;return{dataFormat:i.FourCcToken.get(e,t),dataReferenceIndex:a.UINT16_BE.get(e,t+10),description:s>0?new a.Uint8ArrayType(s).get(e,t+12):void 0}}}class B{constructor(e){this.len=e}get(e,t){let s,r,i=(s=e,r=t,{version:a.UINT8.get(s,r),flags:a.UINT24_BE.get(s,r+1),numberOfEntries:a.UINT32_BE.get(s,r+4)});t+=8;let n=[];for(let s=0;s<i.numberOfEntries;++s){let s=a.UINT32_BE.get(e,t);t+=a.UINT32_BE.len,n.push(new w(s-a.UINT32_BE.len).get(e,t)),t+=s}return{header:i,table:n}}}class N{constructor(e,t){this.len=e,this.token=t}get(e,t){let s=a.INT32_BE.get(e,t+4);return{version:a.INT8.get(e,t+0),flags:a.INT24_BE.get(e,t+1),numberOfEntries:s,entries:P(e,this.token,t+8,this.len-8,s)}}}let E={len:8,get:(e,t)=>({count:a.INT32_BE.get(e,t+0),duration:a.INT32_BE.get(e,t+4)})};class y extends N{constructor(e){super(e,E)}}let b={len:12,get:(e,t)=>({firstChunk:a.INT32_BE.get(e,t),samplesPerChunk:a.INT32_BE.get(e,t+4),sampleDescriptionId:a.INT32_BE.get(e,t+8)})};class S extends N{constructor(e){super(e,b)}}class _{constructor(e){this.len=e}get(e,t){let s=a.INT32_BE.get(e,t+8);return{version:a.INT8.get(e,t),flags:a.INT24_BE.get(e,t+1),sampleSize:a.INT32_BE.get(e,t+4),numberOfEntries:s,entries:P(e,a.INT32_BE,t+12,this.len-12,s)}}}class U extends N{constructor(e){super(e,a.INT32_BE),this.len=e}}class z{constructor(e){this.len=e}get(e,t){let s=a.INT16_BE.get(e,t+0);return new a.StringType(s,"utf-8").get(e,t+2)}}function P(e,t,a,s,r){if(l(`remainingLen=${s}, numberOfEntries=${r} * token-len=${t.len}`),0===s)return[];if(s!==r*t.len)throw new d("mismatch number-of-entries with remaining atom-length");let i=[];for(let s=0;s<r;++s)i.push(t.get(e,a)),a+=t.len;return i}class v{constructor(e){this.len=e}get(e,t){let s=t+1,r={version:a.INT8.get(e,t),flags:{baseDataOffsetPresent:o.getBit(e,s+2,0),sampleDescriptionIndexPresent:o.getBit(e,s+2,1),defaultSampleDurationPresent:o.getBit(e,s+2,3),defaultSampleSizePresent:o.getBit(e,s+2,4),defaultSampleFlagsPresent:o.getBit(e,s+2,5),defaultDurationIsEmpty:o.getBit(e,s,0),defaultBaseIsMoof:o.getBit(e,s,1)},trackId:a.UINT32_BE.get(e,4)},i=8;return r.flags.baseDataOffsetPresent&&(r.baseDataOffset=a.UINT64_BE.get(e,i),i+=8),r.flags.sampleDescriptionIndexPresent&&(r.sampleDescriptionIndex=a.UINT32_BE.get(e,i),i+=4),r.flags.defaultSampleDurationPresent&&(r.defaultSampleDuration=a.UINT32_BE.get(e,i),i+=4),r.flags.defaultSampleSizePresent&&(r.defaultSampleSize=a.UINT32_BE.get(e,i),i+=4),r.flags.defaultSampleFlagsPresent&&(r.defaultSampleFlags=a.UINT32_BE.get(e,i)),r}}class C{constructor(e){this.len=e}get(e,t){let s=t+1,r={version:a.INT8.get(e,t),flags:{dataOffsetPresent:o.getBit(e,s+2,0),firstSampleFlagsPresent:o.getBit(e,s+2,2),sampleDurationPresent:o.getBit(e,s+1,0),sampleSizePresent:o.getBit(e,s+1,1),sampleFlagsPresent:o.getBit(e,s+1,2),sampleCompositionTimeOffsetsPresent:o.getBit(e,s+1,3)},sampleCount:a.UINT32_BE.get(e,t+4),samples:[]},i=t+8;r.flags.dataOffsetPresent&&(r.dataOffset=a.UINT32_BE.get(e,i),i+=4),r.flags.firstSampleFlagsPresent&&(r.firstSampleFlags=a.UINT32_BE.get(e,i),i+=4);for(let t=0;t<r.sampleCount;++t){if(i>=this.len){l("TrackRunBox size mismatch");break}let t={};r.flags.sampleDurationPresent&&(t.sampleDuration=a.UINT32_BE.get(e,i),i+=4),r.flags.sampleSizePresent&&(t.sampleSize=a.UINT32_BE.get(e,i),i+=4),r.flags.sampleFlagsPresent&&(t.sampleFlags=a.UINT32_BE.get(e,i),i+=4),r.flags.sampleCompositionTimeOffsetsPresent&&(t.sampleCompositionTimeOffset=a.UINT32_BE.get(e,i),i+=4),r.samples.push(t)}return r}}class A{constructor(e){this.len=e}get(e,t){let s=new a.StringType(4,"utf-8");return{version:a.INT8.get(e,t),flags:a.UINT24_BE.get(e,t+1),componentType:s.get(e,t+4),handlerType:s.get(e,t+8),componentName:new a.StringType(this.len-28,"utf-8").get(e,t+28)}}}class D{constructor(e){this.len=e}get(e,t){let s=0,r=[];for(;s<this.len;)r.push(a.UINT32_BE.get(e,t+s)),s+=4;return r}}let $=(0,t.default)("music-metadata:parser:MP4:Atom");class x{static async readAtom(e,t,a,s){let r=e.position;$(`Reading next token on offset=${r}...`);let i=await e.readToken(h),n=1n===i.length;n&&(i.length=await e.readToken(m));let o=new x(i,n,a),l=o.getPayloadLength(s);return $(`parse atom name=${o.atomPath}, extended=${o.extended}, offset=${r}, len=${o.header.length}`),await o.readData(e,t,l),o}constructor(e,t,a){this.header=e,this.extended=t,this.parent=a,this.children=[],this.atomPath=(this.parent?`${this.parent.atomPath}.`:"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(e){return(0n===this.header.length?e:Number(this.header.length))-this.getHeaderLength()}async readAtoms(e,t,a){for(;a>0;){let s=await x.readAtom(e,t,this,a);this.children.push(s),a-=0n===s.header.length?a:Number(s.header.length)}}async readData(e,t,a){switch(this.header.name){case"moov":case"udta":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":case"moof":return this.readAtoms(e,t,this.getPayloadLength(a));case"meta":{let s=4*("hdlr"!==(await e.peekToken(h)).name);return await e.ignore(s),this.readAtoms(e,t,this.getPayloadLength(a)-s)}default:return t(this,a)}}}var F=e.i(91858),O=e.i(44397),L=e.i(62950);let M=(0,t.default)("music-metadata:parser:MP4"),R={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function V(e,t,a){return a.indexOf(e)===t}class W extends s.BasicParser{constructor(){super(...arguments),this.tracks=new Map,this.hasVideoTrack=!1,this.hasAudioTrack=!0,this.atomParsers={mvhd:async e=>{let t=await this.tokenizer.readToken(new f(e));this.metadata.setFormat("creationTime",t.creationTime),this.metadata.setFormat("modificationTime",t.modificationTime)},chap:async e=>{let t=this.getTrackDescription(),s=[];for(;e>=a.UINT32_BE.len;)s.push(await this.tokenizer.readNumber(a.UINT32_BE)),e-=a.UINT32_BE.len;t.chapterList=s},mdat:async e=>{if(this.options.includeChapters){let t=[...this.tracks.values()].filter(e=>e.chapterList);if(1===t.length){let a=t[0].chapterList,s=[...this.tracks.values()].filter(e=>-1!==a.indexOf(e.header.trackId));if(1===s.length)return this.parseChapterTrack(s[0],t[0],e)}}await this.tokenizer.ignore(e)},ftyp:async e=>{let t=[];for(;e>0;){let a=await this.tokenizer.readToken(c);e-=c.len;let s=a.type.replace(/\W/g,"");s.length>0&&t.push(s)}M(`ftyp: ${t.join("/")}`);let a=t.filter(V).join("/");this.metadata.setFormat("container",a)},stsd:async e=>{let t=await this.tokenizer.readToken(new B(e));this.getTrackDescription().soundSampleDescription=t.table.map(e=>this.parseSoundSampleDescription(e))},stsz:async e=>{let t=await this.tokenizer.readToken(new _(e)),a=this.getTrackDescription();a.sampleSize=t.sampleSize,a.sampleSizeTable=t.entries},date:async e=>{let t=await this.tokenizer.readToken(new a.StringType(e,"utf-8"));await this.addTag("date",t)}}}static read_BE_Integer(e,t){let s=(t?"INT":"UINT")+8*e.length+(e.length>1?"_BE":""),r=a[s];if(!r)throw new d(`Token for integer type not found: "${s}"`);return Number(r.get(e,0))}async parse(){this.hasVideoTrack=!1,this.hasAudioTrack=!0,this.tracks.clear();let e=this.tokenizer.fileInfo.size||0;for(;!this.tokenizer.fileInfo.size||e>0;){try{let e=await this.tokenizer.peekToken(h);if("\0\0\0\0"===e.name){let e=`Error at offset=${this.tokenizer.position}: box.id=0`;M(e),this.addWarning(e);break}}catch(e){if(e instanceof Error){let t=`Error at offset=${this.tokenizer.position}: ${e.message}`;M(t),this.addWarning(t)}else throw e;break}let t=await x.readAtom(this.tokenizer,(e,t)=>this.handleAtom(e,t),null,e);e-=t.header.length===BigInt(0)?e:Number(t.header.length)}let t=[];this.tracks.forEach(e=>{let a=[];e.soundSampleDescription.forEach(e=>{let t={},s=R[e.dataFormat];if(s?(a.push(s.format),t.codecName=s.format):t.codecName=`<${e.dataFormat}>`,e.description){let{description:a}=e;a.sampleRate>0&&(t.type=F.TrackType.audio,t.audio={samplingFrequency:a.sampleRate,bitDepth:a.sampleSize,channels:a.numAudioChannels})}this.metadata.addStreamInfo(t)}),a.length>=1&&t.push(a.join("/"))}),t.length>0&&this.metadata.setFormat("codec",t.filter(V).join("+"));let a=[...this.tracks.values()].filter(e=>e.soundSampleDescription.length>=1&&e.soundSampleDescription[0].description&&e.soundSampleDescription[0].description.numAudioChannels>0);for(let e of a){if(e.media.header&&e.media.header.timeScale>0)if(e.sampleRate=e.media.header.timeScale,e.media.header.duration>0&&(M("Using duration defined on audio track"),e.samples=e.media.header.duration,e.duration=e.samples/e.sampleRate),e.fragments.length>0){M("Calculate duration defined in track fragments");let t=0;for(let a of(e.sizeInBytes=0,e.fragments))for(let s of a.trackRun.samples){let r=s.sampleDuration??a.header.defaultSampleDuration??0,i=s.sampleSize??a.header.defaultSampleSize??0;if(0===r)throw Error("Missing sampleDuration and no defaultSampleDuration in track fragment header");if(0===i)throw Error("Missing sampleSize and no defaultSampleSize in track fragment header");t+=r,e.sizeInBytes+=i}e.samples||(e.samples=t),e.duration||(e.duration=t/e.sampleRate)}else e.sampleSizeTable.length>0&&(e.sizeInBytes=e.sampleSizeTable.reduce((e,t)=>e+t,0));let t=e.soundSampleDescription[0];if(t.description&&e.media.header&&(this.metadata.setFormat("sampleRate",t.description.sampleRate),this.metadata.setFormat("bitsPerSample",t.description.sampleSize),this.metadata.setFormat("numberOfChannels",t.description.numAudioChannels),0===e.media.header.timeScale&&e.timeToSampleTable.length>0)){let a=e.timeToSampleTable.map(e=>e.count*e.duration).reduce((e,t)=>e+t);e.duration=a/t.description.sampleRate}let a=R[t.dataFormat];a&&this.metadata.setFormat("lossless",!a.lossy)}if(a.length>=1){let e=a[0];e.duration&&(this.metadata.setFormat("duration",e.duration),e.sizeInBytes&&this.metadata.setFormat("bitrate",8*e.sizeInBytes/e.duration))}this.metadata.setFormat("hasAudio",this.hasAudioTrack),this.metadata.setFormat("hasVideo",this.hasVideoTrack)}async handleAtom(e,t){if(e.parent)switch(e.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(e);case"moov":switch(e.header.name){case"trak":case"udta":return this.parseTrackBox(e)}break;case"moof":if("traf"===e.header.name)return this.parseTrackFragmentBox(e)}if(this.atomParsers[e.header.name])return this.atomParsers[e.header.name](t);M(`No parser for atom path=${e.atomPath}, payload-len=${t}, ignoring atom`),await this.tokenizer.ignore(t)}getTrackDescription(){let e=[...this.tracks.values()];return e[e.length-1]}async addTag(e,t){await this.metadata.addTag("iTunes",e,t)}addWarning(e){M(`Warning: ${e}`),this.metadata.addWarning(e)}parseMetadataItemData(e){let t=e.header.name;return e.readAtoms(this.tokenizer,async(e,s)=>{let r=e.getPayloadLength(s);switch(e.header.name){case"data":return this.parseValueAtom(t,e);case"name":case"mean":case"rate":{let e=await this.tokenizer.readToken(new k(r));t+=`:${e.name}`;break}default:{let s=await this.tokenizer.readToken(new a.Uint8ArrayType(r));this.addWarning(`Unsupported meta-item: ${t}[${e.header.name}] => value=${(0,O.uint8ArrayToHex)(s)} ascii=${(0,L.textDecode)(s,"ascii")}`)}}},e.getPayloadLength(0))}async parseValueAtom(e,t){let s=await this.tokenizer.readToken(new T(Number(t.header.length)-h.len));if(0!==s.type.set)throw new d(`Unsupported type-set != 0: ${s.type.set}`);switch(s.type.type){case 0:switch(e){case"trkn":case"disk":{let t=a.UINT8.get(s.value,3),r=a.UINT8.get(s.value,5);await this.addTag(e,`${t}/${r}`);break}case"gnre":{let t=a.UINT8.get(s.value,1),i=r.Genres[t-1];await this.addTag(e,i);break}case"rate":{let t=(0,L.textDecode)(s.value,"ascii");await this.addTag(e,t);break}default:M(`unknown proprietary value type for: ${t.atomPath}`)}break;case 1:case 18:await this.addTag(e,(0,L.textDecode)(s.value));break;case 13:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/jpeg",data:Uint8Array.from(s.value)});break;case 14:if(this.options.skipCovers)break;await this.addTag(e,{format:"image/png",data:Uint8Array.from(s.value)});break;case 21:await this.addTag(e,W.read_BE_Integer(s.value,!0));break;case 22:await this.addTag(e,W.read_BE_Integer(s.value,!1));break;case 65:await this.addTag(e,a.UINT8.get(s.value,0));break;case 66:await this.addTag(e,a.UINT16_BE.get(s.value,0));break;case 67:await this.addTag(e,a.UINT32_BE.get(s.value,0));break;default:this.addWarning(`atom key=${e}, has unknown well-known-type (data-type): ${s.type.type}`)}}async parseTrackBox(e){let t={media:{},fragments:[]};await e.readAtoms(this.tokenizer,async(e,a)=>{let s=e.getPayloadLength(a);switch(e.header.name){case"chap":t.chapterList=await this.tokenizer.readToken(new D(a));break;case"tkhd":t.header=await this.tokenizer.readToken(new I(s));break;case"hdlr":t.handler=await this.tokenizer.readToken(new A(s)),t.isAudio=()=>"audi"===t.handler.handlerType||"soun"===t.handler.handlerType,t.isVideo=()=>"vide"===t.handler.handlerType,t.isAudio()?this.hasAudioTrack=!0:t.isVideo()&&(this.hasVideoTrack=!0);break;case"mdhd":{let e=await this.tokenizer.readToken(new u(s));t.media.header=e;break}case"stco":t.chunkOffsetTable=(await this.tokenizer.readToken(new U(s))).entries;break;case"stsc":t.sampleToChunkTable=(await this.tokenizer.readToken(new S(s))).entries;break;case"stsd":t.soundSampleDescription=(await this.tokenizer.readToken(new B(s))).table.map(e=>this.parseSoundSampleDescription(e));break;case"stts":t.timeToSampleTable=(await this.tokenizer.readToken(new y(s))).entries;break;case"stsz":{let e=await this.tokenizer.readToken(new _(s));t.sampleSize=e.sampleSize,t.sampleSizeTable=e.entries;break}case"dinf":case"vmhd":case"smhd":M(`Ignoring: ${e.header.name}`),await this.tokenizer.ignore(s);break;default:M(`Unexpected track box: ${e.header.name}`),await this.tokenizer.ignore(s)}},e.getPayloadLength(0)),this.tracks.set(t.header.trackId,t)}parseTrackFragmentBox(e){let t;return e.readAtoms(this.tokenizer,async(e,a)=>{let s=e.getPayloadLength(a);switch(e.header.name){case"tfhd":{let s=new v(e.getPayloadLength(a));t=await this.tokenizer.readToken(s);break}case"tfdt":await this.tokenizer.ignore(s);break;case"trun":{let e=new C(s),a=await this.tokenizer.readToken(e);if(t){let e=this.tracks.get(t.trackId);e?.fragments.push({header:t,trackRun:a})}break}default:M(`Unexpected box: ${e.header.name}`),await this.tokenizer.ignore(s)}},e.getPayloadLength(0))}parseSoundSampleDescription(e){let t={dataFormat:e.dataFormat,dataReferenceIndex:e.dataReferenceIndex},s=0;if(e.description){let r,i,n,o,l=(r=e.description,i=s,{version:a.INT16_BE.get(r,i),revision:a.INT16_BE.get(r,i+2),vendor:a.INT32_BE.get(r,i+4)});s+=8,0===l.version||1===l.version?(n=e.description,o=s,t.description={numAudioChannels:a.INT16_BE.get(n,o+0),sampleSize:a.INT16_BE.get(n,o+2),compressionId:a.INT16_BE.get(n,o+4),packetSize:a.INT16_BE.get(n,o+6),sampleRate:a.UINT16_BE.get(n,o+8)+a.UINT16_BE.get(n,o+10)/1e4}):M(`Warning: sound-sample-description ${l} not implemented`)}return t}async parseChapterTrack(e,t,a){if(!e.sampleSize&&e.chunkOffsetTable.length!==e.sampleSizeTable.length)throw Error("Expected equal chunk-offset-table & sample-size-table length.");let s=[];for(let r=0;r<e.chunkOffsetTable.length&&a>0;++r){let i=e.timeToSampleTable.slice(0,r).reduce((e,t)=>e+t.duration,0),n=e.chunkOffsetTable[r]-this.tokenizer.position,o=e.sampleSize>0?e.sampleSize:e.sampleSizeTable[r];if((a-=n+o)<0)throw new d("Chapter chunk exceeding token length");await this.tokenizer.ignore(n);let l=await this.tokenizer.readToken(new z(o));M(`Chapter ${r+1}: ${l}`);let h={title:l,timeScale:e.media.header?e.media.header.timeScale:0,start:i,sampleOffset:this.findSampleOffset(t,this.tokenizer.position)};M(`Chapter title=${h.title}, offset=${h.sampleOffset}/${t.header.duration}`),s.push(h)}this.metadata.setFormat("chapters",s),await this.tokenizer.ignore(a)}findSampleOffset(e,t){let a=0;for(;a<e.chunkOffsetTable.length&&e.chunkOffsetTable[a]<t;)++a;return this.getChunkDuration(a+1,e)}getChunkDuration(e,t){let a=0,s=t.timeToSampleTable[a].count,r=t.timeToSampleTable[a].duration,i=1,n=this.getSamplesPerChunk(i,t.sampleToChunkTable),o=0;for(;i<e;){let e=Math.min(s,n);o+=e*r,s-=e,0==(n-=e)?(++i,n=this.getSamplesPerChunk(i,t.sampleToChunkTable)):(++a,s=t.timeToSampleTable[a].count,r=t.timeToSampleTable[a].duration)}return o}getSamplesPerChunk(e,t){for(let a=0;a<t.length-1;++a)if(e>=t[a].firstChunk&&e<t[a+1].firstChunk)return t[a].samplesPerChunk;return t[t.length-1].samplesPerChunk}}e.s(["MP4Parser",()=>W],75658)}]);